{"version":3,"sources":["verify.js"],"names":["define","ko","$tools","Task","context","self","parent","data","loading","subject_id","observable","previewUrl","currentQuestionId","dealTpl","today_mark","answered_status","templates","button_visible","button_disable","status_num_map","check_finished_count","check_unfinished_count","today_my_check_count","today_my_mark_count","status_num","mapping","fromJS","subscribe","getNum","isShow","ajax","url","success","returnData","console","log","question_id","list","observableArray","white_list","isWhite","questionDetialParams","v","getQuestions","d","question","content","sub_contents","check_answers_list","submit","white_list_data","push","verified_count","unverified_count","msgTip","$","off","on","test","window","verify"],"mappings":"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","file":"verify.js","sourcesContent":["define(['knockout', 'Tools','Task', 'popbox', 'slideout', 'ko-mapping','question_detail'], function (ko, $tools, Task) {\r\n    return function (context) {\r\n        var self = this;\r\n\r\n        self.parent = context.parent;\r\n        self.data = context.data;\r\n\r\n        self.loading = self.parent.loading;\r\n        self.loading(false);\r\n        self.subject_id = ko.observable(101);\r\n        self.previewUrl = ko.observable('');\r\n        self.currentQuestionId = ko.observable('');\r\n        self.dealTpl = ko.observable({});\r\n\r\n        self.today_mark = ko.observable(0); //今天标记的题目数\r\n        self.answered_status = ko.observable(1);\r\n\r\n        self.templates = ko.observable({});\r\n        self.button_visible = ko.observable(false);\r\n        self.button_disable = ko.observable(false);\r\n        let status_num_map = {\r\n            check_finished_count:0,\r\n            check_unfinished_count:0,\r\n            today_my_check_count:0,\r\n            today_my_mark_count:0\r\n        }\r\n        self.status_num = ko.mapping.fromJS(status_num_map);\r\n        self.subject_id.subscribe(function(){\r\n            self.getNum();\r\n            self.isShow(false);\r\n            self.button_visible(false);\r\n        });\r\n        self.getNum = function(){\r\n            $tools.ajax({\r\n                url:'/multiple_answers/tips',\r\n                data:{\r\n                    subject_id:self.subject_id()\r\n                },\r\n                success:function(returnData){\r\n                    console.log(returnData);\r\n                    ko.mapping.fromJS(returnData,self.status_num);\r\n                }\r\n            });\r\n        };\r\n        self.question_id = ko.observable('');\r\n        self.isShow = ko.observable(false);\r\n        self.list = ko.observableArray([]);\r\n        self.white_list = ko.observableArray([]);\r\n        self.isWhite = false;\r\n        self.questionDetialParams = {\r\n            question_id:self.question_id,\r\n            v:new Task(),\r\n            list:self.list,\r\n            white_list:self.white_list,\r\n            isWhite:self.isWhite\r\n        };\r\n        //获取题目\r\n        self.isShow = ko.observable(false);\r\n        self.getQuestions = function () {\r\n           $tools.ajax({\r\n                //url:'xx/questions/list',\r\n                url:'/multiple_answers/check_extract',\r\n                data:{\r\n                    subject_id:self.subject_id()\r\n                },\r\n                success:function(returnData){\r\n                    let d = returnData.data;\r\n                    console.log(d);\r\n                    console.log(d.question.content.sub_contents[0]);\r\n                    self.list(d.question.content.sub_contents[0]);\r\n                    self.question_id(d.question_id);\r\n                    self.white_list(d.check_answers_list);\r\n                    self.isShow(true);\r\n                    self.button_visible(true);\r\n                    self.button_disable(false);\r\n                }\r\n            });\r\n        };\r\n        self.submit = function(){\r\n            $tools.ajax({\r\n                url:'/multiple_answers/check',\r\n                data:{\r\n                    subject_id:self.subject_id(),\r\n                    white_list_data:self.questionDetialParams.v\r\n                },\r\n                success:function(data){\r\n                    self.white_list.push(666);\r\n                    console.log(self.white_list());\r\n                    self.button_disable(true);\r\n                    self.today_mark(self.today_mark() + 1);\r\n                    self.status_num.verified_count(self.status_num.verified_count()+1);\r\n                    self.status_num.unverified_count(self.status_num.unverified_count()-1);\r\n                    $tools.msgTip('操作成功', 'success');\r\n                }\r\n            });\r\n        };\r\n       \r\n\r\n\r\n        $('body').off('verify_page_ready').on('verify_page_ready', function () {\r\n             self.getNum();\r\n        });\r\n         if(self.data.test){\r\n            window.verify = self;\r\n        }\r\n\r\n    };\r\n});\r\n//# sourceMappingURL=es6/maps/mark.js.map"],"sourceRoot":"/source/"}