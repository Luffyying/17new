{"version":3,"sources":["list.js"],"names":["define","ko","$tools","Task","context","self","parent","data","loading","subject_id","observable","previewUrl","currentQuestionId","dealTpl","today_mark","answered_status","templates","button_visible","button_disable","ma_id","isShow","isWhite","list","observableArray","question_id","white_list","questionDetialParams","v","postData","answers","countArr","arrs","search","ajax","url","type","success","returnData","d","console","log","question","content","sub_contents","_id","undetermined_answers","item","arr","a","count","i","push","answers_list","submit","$","find","each","p","val","k","split","length","s","ar","JSON","stringify","result","off","on","test","window"],"mappings":"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","file":"list.js","sourcesContent":["define(['knockout', 'Tools', 'Task','mobilePreview', 'popbox', 'slideout', 'ko-mapping','question_detail'], function (ko, $tools,Task) {\r\n    return function (context) {\r\n        var self = this;\r\n\r\n        self.parent = context.parent;\r\n        self.data = context.data;\r\n\r\n        self.loading = self.parent.loading;\r\n        self.loading(false);\r\n        self.subject_id = ko.observable(101);\r\n\r\n        self.previewUrl = ko.observable('');\r\n        self.currentQuestionId = ko.observable('');\r\n        self.dealTpl = ko.observable({});\r\n\r\n        self.today_mark = ko.observable(0); //今天标记的题目数\r\n        self.answered_status = ko.observable(1);\r\n\r\n        self.templates = ko.observable({});\r\n        self.button_visible = ko.observable(false);\r\n        self.button_disable = ko.observable(false);\r\n        self.ma_id = ko.observable('');\r\n        self.isShow = ko.observable(false);\r\n        self.isWhite = true;\r\n        self.list = ko.observableArray([]);\r\n        self.question_id = ko.observable('');\r\n        self.white_list = ko.observableArray([]);\r\n        self.questionDetialParams = {\r\n            question_id:self.question_id,\r\n            v:new Task(),\r\n            list:self.list,\r\n            white_list:self.white_list,\r\n            isWhite:self.isWhite,\r\n        };\r\n         //提交的数据\r\n        let postData = {\r\n            ma_id:'',\r\n            answers:[]\r\n        }\r\n        let countArr =[];\r\n        //获取题目\r\n        let arrs = [];\r\n        self.search = function () {\r\n           $tools.ajax({\r\n                url:'/multiple_answers/white_list',\r\n                type:'GET',\r\n                data:{\r\n                    question_id:self.ma_id()\r\n                },\r\n                success:function(returnData){\r\n                    let d = returnData.data;\r\n                    console.log(d);\r\n                    console.log(d.question.content.sub_contents[0]);\r\n                    postData.ma_id = d._id;\r\n                    self.list(d.question.content.sub_contents);\r\n                    self.question_id(d.question_id);\r\n                    self.white_list(d.question.content.sub_contents.undetermined_answers);\r\n                    //self.white_list(d.undetermined_answers);\r\n                    countArr = [];//记录多答案的数目\r\n                    for(let item of d.undetermined_answers){\r\n                        let arr = [];\r\n                        let a = item.answers;\r\n                        let count = 0;\r\n                        for(let i of a){\r\n                            count++;\r\n                            arr.push(i.answers_list);\r\n                        }\r\n                        countArr.push(count);\r\n                        // postData.answers.push(arr);\r\n                        arrs.push(arr);\r\n                    }\r\n                    self.isShow(true);\r\n                    self.button_visible(true);\r\n                    self.button_disable(false);\r\n                    \r\n                }\r\n            });\r\n        };\r\n        self.submit = function(){\r\n           $('.white_list').find('textarea').each(function(i){\r\n            console.log(i);\r\n                var p = $(this).val();\r\n                    var k = p.split('\\n');\r\n                    //console.log(k);\r\n                    //var ar = [];\r\n                    for(var i=0;i<k.length;i++){\r\n                        console.log(k[i]);\r\n                        var s = k[i].split(',');\r\n                        ar.push(s);\r\n                    }\r\n            });\r\n            //var array = self.questionDetialParams.v.addValue().split(',');\r\n            //console.log(array);\r\n            //postData.answers.push(array);\r\n            $tools.ajax({\r\n                url:'/multiple_answers/white_list',\r\n                data:JSON.stringify(postData),\r\n                success:function(data){\r\n                    self.white_list.push(self.questionDetialParams.v.result);\r\n                }\r\n            });\r\n        };\r\n       \r\n        $('body').off('list_page_ready').on('list_page_ready', function () {\r\n            //self.getQuestionNum();\r\n        });\r\n        if(self.data.test){\r\n            window.list = self;\r\n        }\r\n\r\n    };\r\n});\r\n//# sourceMappingURL=es6/maps/mark.js.map"],"sourceRoot":"/source/"}