{"version":3,"sources":["config.js"],"names":["define","ko","$tools","mobilePreview","question","initEditor","context","self","parent","data","loading","subject_id","observable","previewUrl","currentQuestionId","dealTpl","today_mark","answered_status","templates","button_visible","button_disable","isOnly","configTpl","dataList","observableArray","isAdd","addConfig","con","box","$","popbox","title","width","maxHeight","content","customPos","marginTop","marginLeft","onOpen","applyBindings","name","mapping","getTmpl","onOk","ajax","url","check_times","time","condition","val","success","returnData","console","log","push","msgTip","close","onClose","times","edit_config","taskData","toString","subject","window","location","reload","off","on","test","config"],"mappings":"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","file":"config.js","sourcesContent":["define(['knockout', 'Tools', 'mobilePreview', 'initEditor', 'popbox', 'slideout', 'ko-mapping','popbox'], function (ko, $tools, mobilePreview, question, initEditor) {\r\n    return function (context) {\r\n        var self = this;\r\n\r\n        self.parent = context.parent;\r\n        self.data = context.data;\r\n\r\n        self.loading = self.parent.loading;\r\n        self.loading(false);\r\n\r\n        self.subject_id = ko.observable(101);\r\n        self.previewUrl = ko.observable('');\r\n        self.currentQuestionId = ko.observable('');\r\n        self.dealTpl = ko.observable({});\r\n\r\n        self.today_mark = ko.observable(0); //今天标记的题目数\r\n        self.answered_status = ko.observable(1);\r\n        self.templates = ko.observable({});\r\n        self.button_visible = ko.observable(false);\r\n        self.button_disable = ko.observable(true);\r\n\r\n        //是否仅显示一个验证环节的条件\r\n        self.isOnly = ko.observable(true);\r\n        self.configTpl = ko.observable({});\r\n        self.dataList = ko.observableArray([]);\r\n        //self.dataList = ko.observableArray([{subject:'1',mark_count:2,condition:'788'}]);\r\n        self.isAdd = false;\r\n        //添加\r\n        self.addConfig = function(){\r\n            self.isOnly(true);\r\n            self.con('');\r\n            self.isAdd = true;\r\n             var box = $.popbox({\r\n                title: '添加配置',\r\n                width: '800px',\r\n                maxHeight: '450px',\r\n                content: '<div id=\"configTpl\" data-bind=\"template: configTpl\"></div>',\r\n                customPos: {marginTop: '-300px', marginLeft: '-400px'},\r\n                onOpen: function(box){\r\n                    ko.applyBindings(self, box[0]);\r\n                    self.configTpl({\r\n                        name: self.data.mapping.getTmpl('configTpl')\r\n                    });\r\n                },\r\n                onOk: function(){                       \r\n                    $tools.ajax({\r\n                        url: '/multiple_answers/edit_config',\r\n                        data: {\r\n                            subject_id:self.subject_id(),\r\n                            check_times:self.time(),\r\n                            condition:$('input:checked').val()\r\n                        },\r\n                        success: function(returnData){\r\n                            console.log(returnData.data);\r\n                            self.dataList.push(returnData.data);\r\n                            $tools.msgTip('操作成功', 'success');\r\n                            box.close();\r\n\r\n                        }\r\n                    });\r\n                    return false;\r\n                },\r\n                onClose: function(){\r\n                   \r\n                }\r\n            });\r\n        }\r\n        self.times = ko.observableArray([1,2,3,4,5]);\r\n        self.time = ko.observable('');\r\n        //点击编辑任务\r\n        self.con = ko.observable('');\r\n        self.edit_config = function(taskData){\r\n            console.log(taskData);\r\n            self.isAdd = false;\r\n            self.con(taskData.condition.toString());\r\n            self.time(taskData.check_times);\r\n            self.isOnly(taskData.check_times==1?false:true);\r\n            var box = $.popbox({\r\n                title: taskData.subject,\r\n                width: '800px',\r\n                maxHeight: '450px',\r\n                content: '<div id=\"configTpl\" data-bind=\"template: configTpl\"></div>',\r\n                customPos: {marginTop: '-300px', marginLeft: '-400px'},\r\n                onOpen: function(box){\r\n                    ko.applyBindings(self, box[0]);\r\n                    self.configTpl({\r\n                        name: self.data.mapping.getTmpl('configTpl')\r\n                    });\r\n                },\r\n                onOk: function(){                       \r\n                    $tools.ajax({\r\n                        url: '/multiple_answers/edit_config',\r\n                        data: {\r\n                            subject_id:taskData.subject_id,\r\n                            check_times:self.time(),\r\n                            condition:$('input:checked').val()\r\n                        },\r\n                        success: function(returnData){\r\n                            //self.dataList.(returnData.data);\r\n                            $tools.msgTip('操作成功', 'success');\r\n                            box.close();\r\n                            window.location.reload();\r\n                        }\r\n                    });\r\n                    return false;\r\n                },\r\n                onClose: function(){\r\n                   \r\n                }\r\n            });\r\n            \r\n        };\r\n        $('body').off('config_page_ready').on('config_page_ready', function () {\r\n            $tools.ajax({\r\n                url:'/multiple_answers/configs',\r\n                data:{},\r\n                success:function(returnData){\r\n                    console.log(returnData);\r\n                    self.dataList(returnData.data);\r\n                }\r\n            });\r\n        });\r\n\r\n        if (self.data.test) {\r\n            window.config = self;\r\n        }\r\n    };\r\n});\r\n//# sourceMappingURL=es6/maps/mark.js.map"],"sourceRoot":"/source/"}